<div class="productos">
    <h2>Gestión de Productos</h2>
    
    <form (ngSubmit)="guardar()" class="form">
        <div class="form-group">
            <label for="codigo">Código del Producto (Ej: A001)</label>
            <input 
                id="codigo"
                [(ngModel)]="nuevo.codigo" 
                name="codigo" 
                placeholder="Ingrese código alfanumérico" 
                required>
        </div>

        <div class="form-group">
            <label for="nombre">Nombre del Producto (mínimo 5 caracteres)</label>
            <input 
                id="nombre"
                [(ngModel)]="nuevo.nombre" 
                name="nombre" 
                placeholder="Ingrese nombre del producto"
                required 
                type="string">
        </div>
        
        <div class="form-group">
            <label for="precio">Precio de Venta (entre $10 y $100)</label>
            <input 
                id="precio"
                [(ngModel)]="nuevo.precio" 
                name="precio" 
                type="number"
                step="0.01"
                placeholder="Ingrese precio de venta"
                required>
        </div>

        <div class="form-group">
            <label for="costo">Costo del Producto (mayor a $0)</label>
            <input 
                id="costo"
                [(ngModel)]="nuevo.costo"
                name="costo"
                type="number"
                step="0.01"
                placeholder="Ingrese costo del producto"
                required>
        </div>

        <div class="form-actions">
            <button type="submit">{{ editando ? 'Actualizar' : 'Agregar'}}</button>
            <button type="button" (click)="cancelar()" *ngIf="editando">Cancelar</button>
        </div>
    </form>

    <div *ngIf="cargando">Cargando productos...</div>
    <div *ngIf="log" class="alert alert-danger alert-dismissible fade show" role="alert">
        {{ log }}
        <button type="button" class="btn-close" (click)="log=''" aria-label="Close"></button>
    </div>
    <table *ngIf="!cargando" border="1" width="100%">
        <tr>
            <th>ID</th>
            <th>Código</th>
            <th>Nombre</th>
            <th>Precio</th>
            <th>Valor</th>
            <th>Acciones</th>
        </tr>
        <tr *ngFor="let p of productos">
            <td>{{ p.id }}</td>
            <td>{{ p.codigo }}</td>
            <td>{{ p.nombre }}</td>
            <td>{{ p.precio | number:'1.2-2' }}</td>
            <td>{{ p.valor | number:'1.2-2' }}</td>
            <td>
                <button (click)="editar(p)">Editar</button>
                <button (click)="eliminar(p.id)">Eliminar</button>
            </td>
        </tr>

    </table>
</div>